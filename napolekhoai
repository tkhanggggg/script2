local player = game.Players.LocalPlayer
local gui = player:WaitForChild("PlayerGui")

-- T·∫°o menu ch√≠nh
local menuGui = Instance.new("ScreenGui")
menuGui.Name = "GameMenu"
menuGui.Parent = gui

local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.new(0, 300, 0, 200)
menuFrame.Position = UDim2.new(0.2, 0, 0.3, 0) -- ƒêi·ªÅu ch·ªânh ƒë·ªÉ menu kh√¥ng che m√†n h√¨nh
menuFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
menuFrame.BorderSizePixel = 2
menuFrame.Active = true
menuFrame.Draggable = true
menuFrame.Parent = menuGui

-- T·∫°o bi·ªÉu t∆∞·ª£ng thu nh·ªè
local miniFrame = Instance.new("Frame")
miniFrame.Size = UDim2.new(0, 100, 0, 40)
miniFrame.Position = UDim2.new(0.2, 0, 0.3, 0)
miniFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
miniFrame.Visible = false
miniFrame.Parent = menuGui

local miniLabel = Instance.new("TextLabel")
miniLabel.Size = UDim2.new(1, 0, 1, 0)
miniLabel.Text = "Menu"
miniLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
miniLabel.BackgroundTransparency = 1
miniLabel.Parent = miniFrame

-- Th√™m n√∫t thu nh·ªè
local minimizeButton = Instance.new("TextButton")
minimizeButton.Size = UDim2.new(0, 50, 0, 30)
minimizeButton.Position = UDim2.new(1, -55, 0, 5)
minimizeButton.Text = "-"
minimizeButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.Parent = menuFrame

-- Th√™m n√∫t m·ªü r·ªông tr√™n mini menu
local expandButton = Instance.new("TextButton")
expandButton.Size = UDim2.new(1, 0, 1, 0)
expandButton.Text = "Menu"
expandButton.BackgroundTransparency = 1
expandButton.TextColor3 = Color3.fromRGB(255, 255, 255)
expandButton.Parent = miniFrame

-- N√∫t g·∫°t b·∫≠t/t·∫Øt Farm trong menu ch√≠nh
local farmToggle = Instance.new("TextButton")
farmToggle.Size = UDim2.new(1, -10, 0, 40)
farmToggle.Position = UDim2.new(0, 5, 0, 85)
farmToggle.Text = "Farm: T·∫Øt"
farmToggle.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
farmToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
farmToggle.Parent = menuFrame

local farmEnabled = false

farmToggle.MouseButton1Click:Connect(function()
    farmEnabled = not farmEnabled
    if farmEnabled then
        farmToggle.Text = "Farm: B·∫≠t"
        farmToggle.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
        
        -- Ch·ª©c nƒÉng farm: D·ªãch chuy·ªÉn ƒë·∫øn v·ªã tr√≠ farm
        player.Character.HumanoidRootPart.CFrame = CFrame.new(-41, 4, -9742)
        print("üöÄ ƒê√£ d·ªãch chuy·ªÉn!")
        
        -- T√¨m NPC farm
        local npc = workspace.Living:FindFirstChild("The Strongest In History")
        if npc and npc:FindFirstChild("HumanoidRootPart") then
            player.Character.HumanoidRootPart.CFrame = npc.HumanoidRootPart.CFrame
            print("‚úÖ ƒê√£ d·ªãch chuy·ªÉn ƒë·∫øn NPC!")
            
            -- Gi·ªØ v·ªã tr√≠ sau l∆∞ng NPC li√™n t·ª•c khi farm
            spawn(function()
                while farmEnabled do
                    local currentNpc = workspace.Living:FindFirstChild("The Strongest In History")
                    if currentNpc and currentNpc:FindFirstChild("HumanoidRootPart") then
                        local behindPosition = currentNpc.HumanoidRootPart.Position - currentNpc.HumanoidRootPart.CFrame.LookVector * 4
                        player.Character.HumanoidRootPart.CFrame = CFrame.new(behindPosition, currentNpc.HumanoidRootPart.Position)
                    else
                        -- N·∫øu NPC kh√¥ng t·ªìn t·∫°i trong khi ch·∫°y, hi·ªÉn th·ªã th√¥ng b√°o trong 3 gi√¢y
                        local notify = Instance.new("TextLabel")
                        notify.Size = UDim2.new(0, 300, 0, 50)
                        notify.Position = UDim2.new(0.5, -150, 0, 10) -- V·ªã tr√≠ "tr√™n v√† gi·ªØa" m√†n h√¨nh
                        notify.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
                        notify.BackgroundTransparency = 0.5
                        notify.TextColor3 = Color3.fromRGB(255, 255, 255)
                        notify.Text = "Kh√¥ng t√¨m th·∫•y NPC!"
                        notify.Parent = menuGui
                        delay(3, function() 
                            if notify then notify:Destroy() end
                        end)
                        break
                    end
                    task.wait(0.1)
                end
            end)
        else
            print("‚ùå Kh√¥ng t√¨m th·∫•y NPC!")
            local notify = Instance.new("TextLabel")
            notify.Size = UDim2.new(0, 300, 0, 50)
            notify.Position = UDim2.new(0.5, -150, 0, 10) -- V·ªã tr√≠ "tr√™n v√† gi·ªØa" m√†n h√¨nh
            notify.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
            notify.BackgroundTransparency = 0.5
            notify.TextColor3 = Color3.fromRGB(255, 255, 255)
            notify.Text = "Kh√¥ng t√¨m th·∫•y NPC!"
            notify.Parent = menuGui
            delay(3, function() 
                if notify then notify:Destroy() end
            end)
        end
    else
        farmToggle.Text = "Farm: T·∫Øt"
        farmToggle.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        print("‚ùå ƒê√£ d·ª´ng ch·∫ø ƒë·ªô Farm!")
    end
end)

-- N√∫t m·ªü menu Farm (chuy·ªÉn t·ª´ menu ch√≠nh sang menu con)
local farmButton
