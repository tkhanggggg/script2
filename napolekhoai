local player = game.Players.LocalPlayer
local gui = player:WaitForChild("PlayerGui")

-- T·∫°o ScreenGui cho menu
local menuGui = Instance.new("ScreenGui")
menuGui.Name = "GameMenu"
menuGui.Parent = gui

-- T·∫°o menu ch√≠nh
local menuFrame = Instance.new("Frame")
menuFrame.Size = UDim2.new(0, 300, 0, 200)
menuFrame.Position = UDim2.new(0.2, 0, 0.3, 0) -- ƒë·∫∑t v·ªã tr√≠ kh√¥ng che qu√° nhi·ªÅu m√†n h√¨nh
menuFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
menuFrame.BorderSizePixel = 2
menuFrame.Active = true
menuFrame.Draggable = true
menuFrame.Parent = menuGui

-- T·∫°o bi·ªÉu t∆∞·ª£ng thu nh·ªè
local miniFrame = Instance.new("Frame")
miniFrame.Size = UDim2.new(0, 100, 0, 40)
miniFrame.Position = menuFrame.Position
miniFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
miniFrame.Visible = false
miniFrame.Parent = menuGui

local miniLabel = Instance.new("TextLabel")
miniLabel.Size = UDim2.new(1, 0, 1, 0)
miniLabel.Text = "Menu"
miniLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
miniLabel.BackgroundTransparency = 1
miniLabel.Parent = miniFrame

-- N√∫t thu nh·ªè (minimize)
local minimizeButton = Instance.new("TextButton")
minimizeButton.Size = UDim2.new(0, 50, 0, 30)
minimizeButton.Position = UDim2.new(1, -55, 0, 5)
minimizeButton.Text = "-"
minimizeButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.Parent = menuFrame

-- N√∫t m·ªü r·ªông (expand) tr√™n mini menu
local expandButton = Instance.new("TextButton")
expandButton.Size = UDim2.new(1, 0, 1, 0)
expandButton.Text = "Menu"
expandButton.BackgroundTransparency = 1
expandButton.TextColor3 = Color3.fromRGB(255, 255, 255)
expandButton.Parent = miniFrame

-- N√∫t g·∫°t b·∫≠t/t·∫Øt t·ªïng cho ch·∫ø ƒë·ªô Farm
local farmToggle = Instance.new("TextButton")
farmToggle.Size = UDim2.new(1, -10, 0, 40)
farmToggle.Position = UDim2.new(0, 5, 0, 85)
farmToggle.Text = "Farm: T·∫Øt"
farmToggle.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
farmToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
farmToggle.Parent = menuFrame

-- N√∫t "T·∫Øt Farm" hi·ªÉn th·ªã r√µ, ƒë·ªÉ d·ª´ng ch·∫ø ƒë·ªô Farm ngay l·∫≠p t·ª©c
local stopFarmButton = Instance.new("TextButton")
stopFarmButton.Size = UDim2.new(1, -10, 0, 40)
stopFarmButton.Position = UDim2.new(0, 5, 0, 130)  -- ƒë·∫∑t ngay d∆∞·ªõi n√∫t farmToggle
stopFarmButton.Text = "T·∫Øt Farm"
stopFarmButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
stopFarmButton.TextColor3 = Color3.fromRGB(255, 255, 255)
stopFarmButton.Visible = false
stopFarmButton.Parent = menuFrame

local farmEnabled = false

farmToggle.MouseButton1Click:Connect(function()
    farmEnabled = not farmEnabled
    if farmEnabled then
        -- Khi b·∫≠t ch·∫ø ƒë·ªô Farm
        farmToggle.Text = "Farm: B·∫≠t"
        farmToggle.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
        stopFarmButton.Visible = true  -- hi·ªÉn th·ªã n√∫t t·∫Øt
        
        -- Ki·ªÉm tra NPC
        local npc = workspace.Living:FindFirstChild("The Strongest In History")
        if npc and npc:FindFirstChild("HumanoidRootPart") then
            -- N·∫øu t√¨m th·∫•y NPC, d·ªãch chuy·ªÉn ƒë·∫øn v·ªã tr√≠ farm
            player.Character.HumanoidRootPart.CFrame = CFrame.new(-41, 4, -9742)
            print("üöÄ ƒê√£ d·ªãch chuy·ªÉn ƒë·∫øn v·ªã tr√≠ farm!")
            
            -- Ti·∫øp t·ª•c d·ªãch chuy·ªÉn ƒë·∫øn sau l∆∞ng NPC li√™n t·ª•c
            spawn(function()
                while farmEnabled do
                    local currentNpc = workspace.Living:FindFirstChild("The Strongest In History")
                    if currentNpc and currentNpc:FindFirstChild("HumanoidRootPart") then
                        local npcHRP = currentNpc.HumanoidRootPart
                        local behindPosition = npcHRP.Position - npcHRP.CFrame.LookVector * 4
                        player.Character.HumanoidRootPart.CFrame = CFrame.new(behindPosition, npcHRP.Position)
                    else
                        -- N·∫øu NPC kh√¥ng t·ªìn t·∫°i trong khi ch·∫°y, hi·ªán th√¥ng b√°o v√† tho√°t v√≤ng l·∫∑p
                        local notify = Instance.new("TextLabel")
                        notify.Size = UDim2.new(0, 300, 0, 50)
                        notify.Position = UDim2.new(0.5, -150, 0, 10) -- v·ªã tr√≠ tr√™n v√† gi·ªØa m√†n h√¨nh
                        notify.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
                        notify.BackgroundTransparency = 0.5
                        notify.TextColor3 = Color3.fromRGB(255, 255, 255)
                        notify.Text = "Kh√¥ng t√¨m th·∫•y NPC!"
                        notify.Parent = menuGui
                        delay(3, function() 
                            if notify then notify:Destroy() end
                        end)
                        break
                    end
                    task.wait(0.1)
                end
            end)
        else
            -- N·∫øu kh√¥ng t√¨m th·∫•y NPC: kh√¥ng d·ªãch chuy·ªÉn, ch·ªâ hi·ªán th√¥ng b√°o
            print("‚ùå Kh√¥ng t√¨m th·∫•y NPC!")
            local notify = Instance.new("TextLabel")
            notify.Size = UDim2.new(0, 300, 0, 50)
            notify.Position = UDim2.new(0.5, -150, 0, 10)
            notify.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
            notify.BackgroundTransparency = 0.5
            notify.TextColor3 = Color3.fromRGB(255, 255, 255)
            notify.Text = "Kh√¥ng t√¨m th·∫•y NPC!"
            notify.Parent = menuGui
            delay(3, function() 
                if notify then notify:Destroy() end
            end)
        end
    else
        -- Khi t·∫Øt ch·∫ø ƒë·ªô Farm b·∫±ng c√°ch nh·∫•n l·∫°i farmToggle
        farmToggle.Text = "Farm: T·∫Øt"
        farmToggle.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        stopFarmButton.Visible = false
        print("‚ùå ƒê√£ d·ª´ng ch·∫ø ƒë·ªô Farm!")
    end
end)

stopFarmButton.MouseButton1Click:Connect(function()
    -- Khi nh·∫•n n√∫t "T·∫Øt Farm"
    farmEnabled = false
    farmToggle.Text = "Farm: T·∫Øt"
    farmToggle.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    stopFarmButton.Visible = false
    print("üö´ Farm mode ƒë√£ ƒë∆∞·ª£c t·∫Øt b·∫±ng n√∫t T·∫Øt Farm!")
end)

-- Ch·ª©c nƒÉng thu nh·ªè/m·ªü r·ªông menu
minimizeButton.MouseButton1Click:Connect(function()
    menuFrame.Visible = false
    miniFrame.Visible = true
end)

expandButton.MouseButton1Click:Connect(function()
    menuFrame.Visible = true
    miniFrame.Visible = false
end)
